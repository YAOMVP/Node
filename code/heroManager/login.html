<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Bootstrap 101 Template</title>

    <!-- Bootstrap -->
    <link href="./lib/bootstrap/css/bootstrap.min.css" rel="stylesheet" />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="http://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style>
        .login-panel {
            margin-top: 100px;
        }
        
        .vCode {
            height: 36px;
            cursor: pointer;
        }
        
        .wrap {
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: url('images/bg03.jpg') center bottom no-repeat;
            overflow: auto;
        }
        
        .navbar-brand {
            padding: 10px 15px;
        }
        
        .form-horizontal {
            margin-top: 10px;
        }
        
        .form-horizontal .form-group {
            margin-bottom: 20px;
        }
    </style>
</head>

<body>
    <div class="wrap">
        <nav class="navbar  navbar-inverse navbar-static-top">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#mymenu">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
                    <a class="navbar-brand" href="#"><img src="images/logo.png"></a>
                </div>
            </div>
        </nav>
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-md-offset-3">
                    <div class="panel panel-default login-panel">
                        <div class="panel-heading">
                            <h3 class="panel-title"><b>ç”¨æˆ·ç™»å½•</b></h3>
                        </div>
                        <div class="panel-body">
                            <form action="#" method="post" class="form-horizontal">
                                <div class="form-group">
                                    <label for="userName" class="col-sm-2 control-label">ç”¨æˆ·å</label>
                                    <div class="col-sm-10">
                                        <input type="text" name="username" class="form-control" id="username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="userPass" class="col-sm-2 control-label">å¯†ç </label>
                                    <div class="col-sm-10">
                                        <input type="password" name="password" class="form-control" id="password" placeholder="è¯·è¾“å…¥å¯†ç " />
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="col-sm-offset-2 col-sm-10">
                                        <button type="submit" class="btn btn-success login">
                      ç™»é™†
                    </button>
                                        <a href="./register.html" class="btn btn-default">æ³¨å†Œ</a>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ¨¡æ€æ¡†å®¹å™¨ä»£ç  -->
    <div class="modal fade" tabindex="-1" role="dialog" id="myModal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">æ¸©é¦¨æç¤º</h4>
                </div>
                <div class="modal-body">
                    <p>One fine body&hellip;</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->




    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="./lib/bootstrap/js/jquery-1.12.4.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="./lib/bootstrap/js/bootstrap.min.js"></script>
</body>



</html>
<script>
    // $(function() {
    //     // 1. ç»™ç™»å½•æŒ‰é’®è®¾ç½®ç‚¹å‡»äº‹ä»¶
    //     $('.login').on('click', function(e) {
    //         e.preventDefault();

    //         // 2. è·å¾—ç”¨æˆ·è¾“å…¥çš„ä¿¡æ¯
    //         let username = $('#username').val().trim();
    //         let password = $('#password').val().trim();
    //         if (username == '' || password == '') {
    //             // alert('å‚»çŒªçŒª,è¦è¾“å…¥å®Œæ•´å“¦!');
    //             // è°ƒç”¨æ¨¡æ€æ¡†æ˜¾ç¤ºä»£ç 
    //             $('.modal-body p').text('å‚»çŒªçŒª,è¦è¾“å…¥å®Œæ•´å“¦!');
    //             $('#myModal').modal();
    //             return;
    //         }

    //         // 3. å‘èµ·ajaxè¯·æ±‚,éªŒè¯ç”¨æˆ·ä¿¡æ¯
    //         $.ajax({
    //             type: 'post',
    //             url: 'http://localhost:4399/user/login',
    //             data: {
    //                 username: username,
    //                 password: password
    //             },
    //             success: function(backData) {
    //                 // alert(backData.msg); ç‰¹ç‚¹: å¯ä»¥å¡ä½ç¨‹åºçš„æ‰§è¡Œ
    //                 // è°ƒç”¨æ¨¡æ€æ¡†æ˜¾ç¤ºä»£ç 
    //                 // ç‰¹ç‚¹: ä¸ä¼šå¡ä½ç¨‹åºçš„æ‰§è¡Œ,ä¸‹é¢çš„ä»£ç ä¾æ—§å¯ä»¥æ­£å¸¸æ‰§è¡Œ
    //                 $('.modal-body p').text(backData.msg);
    //                 $('#myModal').modal();
    //                 // è§£å†³æ–¹å¼: ç›‘å¬æ¨¡æ€æ¡†,å½“æ¨¡æ€æ¡†è¢«å…³é—­ä¹‹å,å†æ‰§è¡Œä»¥ä¸‹çš„ä»£ç 

    //                 // å½“æ¨¡æ€æ¡†è¢«å…³é—­çš„æ—¶å€™ä¼šæ‰§è¡Œ
    //                 $('#myModal').on('hidden.bs.modal', function(e) {
    //                     // 4. åˆ¤æ–­ç™»å½•çš„çŠ¶æ€
    //                     if (backData.code == 200) {
    //                         // è·³è½¬åˆ°indexé¡µé¢
    //                         window.location = './index.html';
    //                     } else {
    //                         // æ¸…ç©ºè¾“å…¥æ¡†
    //                         $('#username').val('');
    //                         $('#password').val('');
    //                     }
    //                 })
    //             }
    //         })

    //     })
    // })
    $(function() {
        //1.ğŸ˜Šç»™ç™»å½•æŒ‰é’®æ·»åŠ ç™»å½•äº‹ä»¶
        $(".login").on("click", function(e) {
            e.preventDefault(); //ğŸ˜ŠğŸ˜ŠğŸ˜Šå¿˜äº†!!! é˜»æ­¢é»˜è®¤è¡Œä¸º

            //2.ğŸ˜Šè·å–ç”¨æˆ·è¾“å…¥çš„å†…å®¹ï¼š
            let userName = $("#username").val().trim();
            let password = $("#password").val().trim();
            //3.ğŸ˜Šåˆ¤æ–­è¾“å…¥çš„å†…å®¹æ˜¯å¦ä¸ºç©º
            if (userName === "" || password === "") {
                //ğŸ“— alert("è¾“å…¥å†…å®¹å‘€å“¥ä»¬å„¿");ç”¨æ¨¡æ€æ¡†
                $(".modal-body p").html("è¾“å…¥å†…å®¹å‘€å“¥ä»¬å„¿");
                $('#myModal').modal() //ğŸ“—è°ƒç”¨æ¨¡æ€æ¡†ï¼Œå»é¡µé¢ä¸Šæ‰¾â€œç”¨æ³•â€  vscodeä»£ç ä¸Šè¾¹æ²¡æœ‰idè¦åŠ ä¸Š

                return; //ç›´æ¥ç»“æŸå‡½æ•°ï¼Œå› ä¸ºåœ¨å‡½æ•°é‡Œè¾¹
            }
            //4.ğŸ˜Šè·å–ajaxè¯·æ±‚ï¼š
            $.ajax({
                type: "post",
                url: "http://localhost:4399/user/login",
                data: {
                    username: userName,
                    password: password
                },
                success: function(backData) {
                    //ğŸ“—alert(backData.msg);
                    $(".modal-body p").html(backData.msg);
                    $('#myModal').modal();
                    //ğŸ“—æ¨¡æ€æ¡†è¦å…ˆç›‘å¬ æ‰èƒ½æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼Œbootstrapè¦ä¸ç„¶å¤ªå¿«äº†ï¼Œä»£ç æ‰§è¡Œä¸€é—ªè€Œè¿‡ 
                    $('#myModal').on('hidden.bs.modal', function(e) {
                        if (backData.code === 200) {
                            //5.ğŸ˜ŠæˆåŠŸè·³è½¬åˆ°indexé¡µé¢
                            window.location = "./index/html"
                        } else {
                            //6.ğŸ˜Šå¤±è´¥è¾“å…¥ æ¸…ç©ºå†…å®¹
                            $("#username").val("");
                            $("#password").val("")
                        }
                    })
                }
            })
        })
    })
</script>